<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math Master - H·ªçc To√°n L·ªõp 3</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/ai.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <div class="auth-container">
                <div class="auth-header">
                    <h2><i class="fas fa-calculator"></i> Math Master</h2>
                    <p>H·ªá th·ªëng h·ªçc To√°n l·ªõp 3 to√†n di·ªán</p>
                </div>
                
                <div class="auth-tabs">
                    <button class="tab-btn active" onclick="openTab('loginTab')">ƒêƒÉng nh·∫≠p</button>
                    <button class="tab-btn" onclick="openTab('registerTab')">ƒêƒÉng k√Ω</button>
                </div>

                <div id="loginTab" class="tab-content active">
                    <form id="loginForm">
                        <div class="input-group">
                            <i class="fas fa-user"></i>
                            <input type="text" id="loginUsername" placeholder="T√™n ƒëƒÉng nh·∫≠p" required>
                        </div>
                        <div class="input-group">
                            <i class="fas fa-lock"></i>
                            <input type="password" id="loginPassword" placeholder="M·∫≠t kh·∫©u" required>
                        </div>
                        <button type="submit" class="btn-primary">
                            <i class="fas fa-sign-in-alt"></i> ƒêƒÉng nh·∫≠p
                        </button>
                    </form>
                </div>

                <div id="registerTab" class="tab-content">
                    <form id="registerForm">
                        <div class="input-group">
                            <i class="fas fa-user"></i>
                            <input type="text" id="regUsername" placeholder="T√™n ƒëƒÉng nh·∫≠p" required>
                        </div>
                        <div class="input-group">
                            <i class="fas fa-lock"></i>
                            <input type="password" id="regPassword" placeholder="M·∫≠t kh·∫©u" required>
                        </div>
                        <div class="input-group">
                            <i class="fas fa-lock"></i>
                            <input type="password" id="regConfirmPassword" placeholder="X√°c nh·∫≠n m·∫≠t kh·∫©u" required>
                        </div>
                        <div class="input-group">
                            <i class="fas fa-user-tag"></i>
                            <select id="regUserType">
                                <option value="student">H·ªçc sinh</option>
                                <option value="teacher">Gi√°o vi√™n</option>
                                <option value="parent">Ph·ª• huynh</option>
                            </select>
                        </div>
                        <button type="submit" class="btn-primary">
                            <i class="fas fa-user-plus"></i> ƒêƒÉng k√Ω
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="app" class="hidden">
        <!-- Header -->
        <header class="header">
            <div class="container">
                <div class="logo">
                    <i class="fas fa-calculator"></i>
                    <span>Math Master</span>
                </div>
                <nav class="nav">
                    <a href="#" class="nav-link active" data-tab="dashboard">
                        <i class="fas fa-home"></i> Trang ch·ªß
                    </a>
                    <a href="#" class="nav-link" data-tab="learn">
                        <i class="fas fa-graduation-cap"></i> H·ªçc t·∫≠p
                    </a>
                    <a href="#" class="nav-link" data-tab="games">
                        <i class="fas fa-gamepad"></i> Tr√≤ ch∆°i
                    </a>
                    <a href="#" class="nav-link" data-tab="progress">
                        <i class="fas fa-chart-line"></i> Ti·∫øn ƒë·ªô
                    </a>
                    <a href="#" class="nav-link" data-tab="leaderboard">
                        <i class="fas fa-trophy"></i> B·∫£ng x·∫øp h·∫°ng
                    </a>
                    <a href="#" class="nav-link" data-tab="mocktest">
                        <i class="fas fa-file-alt"></i> Thi th·ª≠
                    </a>
                </nav>
                <div class="user-menu">
                    <span id="usernameDisplay"></span>
                    <button id="logoutBtn" class="btn-secondary">
                        <i class="fas fa-sign-out-alt"></i> ƒêƒÉng xu·∫•t
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Tab -->
            <div id="dashboard" class="tab-pane active">
                <div class="container">
                    <div class="welcome-banner">
                        <h1>Ch√†o m·ª´ng ƒë·∫øn v·ªõi Math Master!</h1>
                        <p>H·ªçc To√°n l·ªõp 3 th·∫≠t vui v√† hi·ªáu qu·∫£ c√πng AI Tutor</p>
                        <div class="welcome-features">
                            <div class="feature">
                                <i class="fas fa-robot"></i>
                                <span>AI Tutor Th√¥ng minh</span>
                            </div>
                            <div class="feature">
                                <i class="fas fa-gamepad"></i>
                                <span>Tr√≤ ch∆°i Gi√°o d·ª•c</span>
                            </div>
                            <div class="feature">
                                <i class="fas fa-chart-line"></i>
                                <span>Theo d√µi Ti·∫øn ƒë·ªô</span>
                            </div>
                            <div class="feature">
                                <i class="fas fa-file-alt"></i>
                                <span>Thi th·ª≠ Th√¥ng minh</span>
                            </div>
                        </div>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-card">
                            <i class="fas fa-book-open"></i>
                            <h3>B√†i t·∫≠p ƒë√£ l√†m</h3>
                            <span id="totalExercises">0</span>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-trophy"></i>
                            <h3>ƒêi·ªÉm s·ªë</h3>
                            <span id="totalScore">0</span>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-gamepad"></i>
                            <h3>Tr√≤ ch∆°i ƒë√£ ch∆°i</h3>
                            <span id="gamesPlayed">0</span>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-file-alt"></i>
                            <h3>B√†i thi ƒë√£ l√†m</h3>
                            <span id="mockTestsTaken">0</span>
                        </div>
                    </div>

                    <div class="quick-actions">
                        <h2>B·∫Øt ƒë·∫ßu ngay</h2>
                        <div class="action-grid">
                            <div class="action-card" data-tab="learn">
                                <i class="fas fa-graduation-cap"></i>
                                <h4>H·ªçc t·∫≠p</h4>
                                <p>L√†m b√†i t·∫≠p theo ch·ªß ƒë·ªÅ</p>
                                <div class="action-badge">üìö 50+ b√†i t·∫≠p</div>
                            </div>
                            <div class="action-card" data-tab="games">
                                <i class="fas fa-gamepad"></i>
                                <h4>Tr√≤ ch∆°i</h4>
                                <p>H·ªçc To√°n qua tr√≤ ch∆°i</p>
                                <div class="action-badge">üéÆ 4 tr√≤ ch∆°i</div>
                            </div>
                            <div class="action-card" data-tab="mocktest">
                                <i class="fas fa-file-alt"></i>
                                <h4>Thi th·ª≠</h4>
                                <p>Ki·ªÉm tra ki·∫øn th·ª©c</p>
                                <div class="action-badge">üìù AI t·∫°o ƒë·ªÅ</div>
                            </div>
                            <div class="action-card" data-tab="progress">
                                <i class="fas fa-chart-bar"></i>
                                <h4>Ti·∫øn ƒë·ªô</h4>
                                <p>Theo d√µi k·∫øt qu·∫£ h·ªçc t·∫≠p</p>
                                <div class="action-badge">üìä Ph√¢n t√≠ch AI</div>
                            </div>
                        </div>
                    </div>

                    <div class="ai-feature-showcase">
                        <h2>ü§ñ AI Tutor - Tr·ª£ gi·∫£ng Th√¥ng minh</h2>
                        <div class="ai-features">
                            <div class="ai-feature">
                                <i class="fas fa-comments"></i>
                                <h4>Chat Real-time</h4>
                                <p>H·ªèi ƒë√°p m·ªçi l√∫c v·ªÅ To√°n h·ªçc</p>
                            </div>
                            <div class="ai-feature">
                                <i class="fas fa-lightbulb"></i>
                                <h4>Gi·∫£i th√≠ch Th√¥ng minh</h4>
                                <p>Hi·ªÉu s√¢u t·ª´ng b√†i to√°n</p>
                            </div>
                            <div class="ai-feature">
                                <i class="fas fa-magic"></i>
                                <h4>B√†i t·∫≠p C√° nh√¢n h√≥a</h4>
                                <p>Ph√π h·ª£p tr√¨nh ƒë·ªô c·ªßa b·∫°n</p>
                            </div>
                            <div class="ai-feature">
                                <i class="fas fa-file-alt"></i>
                                <h4>ƒê·ªÅ thi Th√¥ng minh</h4>
                                <p>T·∫°o ƒë·ªÅ thi theo nƒÉng l·ª±c</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Learn Tab -->
            <div id="learn" class="tab-pane">
                <div class="container">
                    <div class="page-header">
                        <h1><i class="fas fa-graduation-cap"></i> H·ªçc t·∫≠p To√°n l·ªõp 3</h1>
                        <p>Ch·ªçn ch·ªß ƒë·ªÅ v√† b·∫Øt ƒë·∫ßu luy·ªán t·∫≠p ngay!</p>
                    </div>
                    
                    <div class="curriculum-section">
                        <h2>Ch∆∞∆°ng tr√¨nh h·ªçc</h2>
                        <div class="curriculum-grid" id="curriculumContainer">
                            <!-- Curriculum items will be loaded here -->
                        </div>
                    </div>
                    
                    <div class="exercise-section hidden" id="exerciseSection">
                        <div class="exercise-header">
                            <button id="backToTopics" class="btn-secondary">
                                <i class="fas fa-arrow-left"></i> Quay l·∫°i ch·ªß ƒë·ªÅ
                            </button>
                            <div class="exercise-info">
                                <h3 id="exerciseTopic">ƒêang t·∫£i...</h3>
                                <p id="exerciseDescription">Ch·ªçn b√†i t·∫≠p ƒë·ªÉ b·∫Øt ƒë·∫ßu</p>
                            </div>
                        </div>
                        
                        <div class="exercise-controls">
                            <button id="generateAIExercise" class="btn-primary">
                                <i class="fas fa-robot"></i> B√†i t·∫≠p AI
                            </button>
                            <button id="shuffleExercises" class="btn-secondary">
                                <i class="fas fa-random"></i> Tr·ªôn b√†i
                            </button>
                        </div>
                        
                        <div class="exercise-container" id="exerciseContainer">
                            <!-- Exercises will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Games Tab -->
            <div id="games" class="tab-pane">
                <div class="container">
                    <div class="page-header">
                        <h1><i class="fas fa-gamepad"></i> Tr√≤ ch∆°i To√°n h·ªçc</h1>
                        <p>H·ªçc m√† ch∆°i - Ch∆°i m√† h·ªçc v·ªõi 4 tr√≤ ch∆°i th√∫ v·ªã</p>
                    </div>
                    
                    <div class="games-section">
                        <div class="games-grid" id="gamesGrid">
                            <div class="game-card" data-game="number_race">
                                <div class="game-image-container">
                                    <div class="game-main-image">üèéÔ∏è</div>
                                </div>
                                <div class="game-content">
                                    <h4>üèéÔ∏è ƒêua To√°n h·ªçc</h4>
                                    <p>Tr·∫£ l·ªùi nhanh trong th·ªùi gian gi·ªõi h·∫°n</p>
                                    <div class="game-meta">
                                        <span class="game-difficulty easy">D·ªÖ</span>
                                        <span class="game-time">2 ph√∫t</span>
                                    </div>
                                    <div class="game-stats">
                                        <small><i class="fas fa-question-circle"></i> 10 c√¢u h·ªèi ‚Ä¢ ‚ö° T·ªëc ƒë·ªô cao</small>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="game-card" data-game="math_puzzle">
                                <div class="game-image-container">
                                    <div class="game-main-image">üß©</div>
                                </div>
                                <div class="game-content">
                                    <h4>üß© Gh√©p S·ªë Th·∫ßn K·ª≥</h4>
                                    <p>Gi·∫£i c√°c c√¢u ƒë·ªë to√°n h·ªçc h·∫•p d·∫´n</p>
                                    <div class="game-meta">
                                        <span class="game-difficulty medium">Trung b√¨nh</span>
                                        <span class="game-time">5 ph√∫t</span>
                                    </div>
                                    <div class="game-stats">
                                        <small><i class="fas fa-brain"></i> Logic ‚Ä¢ üí° T∆∞ duy</small>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="game-card" data-game="treasure_hunt">
                                <div class="game-image-container">
                                    <div class="game-main-image">üè¥‚Äç‚ò†Ô∏è</div>
                                </div>
                                <div class="game-content">
                                    <h4>üè¥‚Äç‚ò†Ô∏è SƒÉn Kho B√°u</h4>
                                    <p>Gi·∫£i m√£ ƒë·ªÉ t√¨m kho b√°u ·∫©n gi·∫•u</p>
                                    <div class="game-meta">
                                        <span class="game-difficulty hard">Kh√≥</span>
                                        <span class="game-time">10 ph√∫t</span>
                                    </div>
                                    <div class="game-stats">
                                        <small><i class="fas fa-search"></i> Kh√°m ph√° ‚Ä¢ üîç Gi·∫£i ƒë·ªë</small>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="game-card" data-game="memory_math">
                                <div class="game-image-container">
                                    <div class="game-main-image">üß†</div>
                                </div>
                                <div class="game-content">
                                    <h4>üß† Tr√≠ nh·ªõ To√°n h·ªçc</h4>
                                    <p>Gh√©p c·∫∑p b√†i to√°n v√† ƒë√°p √°n ƒë√∫ng</p>
                                    <div class="game-meta">
                                        <span class="game-difficulty medium">Trung b√¨nh</span>
                                        <span class="game-time">5 ph√∫t</span>
                                    </div>
                                    <div class="game-stats">
                                        <small><i class="fas fa-memory"></i> Ghi nh·ªõ ‚Ä¢ ‚ö° Ph·∫£n x·∫°</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="game-container hidden" id="gameContainer">
                            <!-- Game content will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Progress Tab -->
            <div id="progress" class="tab-pane">
                <div class="container">
                    <div class="page-header">
                        <h1><i class="fas fa-chart-line"></i> Ti·∫øn ƒë·ªô h·ªçc t·∫≠p</h1>
                        <p>Theo d√µi s·ª± ti·∫øn b·ªô v√† nh·∫≠n ph√¢n t√≠ch t·ª´ AI</p>
                    </div>
                    
                    <div class="progress-overview">
                        <div class="progress-stats">
                            <div class="progress-stat">
                                <h4>T·ªïng ƒëi·ªÉm</h4>
                                <span id="progressTotalScore">0</span>
                            </div>
                            <div class="progress-stat">
                                <h4>B√†i ƒë√£ l√†m</h4>
                                <span id="progressTotalExercises">0</span>
                            </div>
                            <div class="progress-stat">
                                <h4>T·ª∑ l·ªá ƒë√∫ng</h4>
                                <span id="progressAccuracy">0%</span>
                            </div>
                            <div class="progress-stat">
                                <h4>Th·ªùi gian h·ªçc</h4>
                                <span id="progressStudyTime">0 ph√∫t</span>
                            </div>
                        </div>
                    </div>

                    <div class="progress-content">
                        <div class="progress-charts">
                            <div class="chart-container">
                                <h4>Ti·∫øn ƒë·ªô theo ng√†y</h4>
                                <canvas id="progressChart"></canvas>
                            </div>
                            <div class="chart-container">
                                <h4>Th√†nh th·∫°o ch·ªß ƒë·ªÅ</h4>
                                <canvas id="topicChart"></canvas>
                            </div>
                        </div>
                        
                        <div class="ai-analysis-section">
                            <h3><i class="fas fa-robot"></i> Ph√¢n t√≠ch t·ª´ AI Tutor</h3>
                            <div class="ai-analysis-card">
                                <div id="aiAnalysisContent">
                                    <p>H√£y ho√†n th√†nh m·ªôt s·ªë b√†i t·∫≠p ƒë·ªÉ nh·∫≠n ph√¢n t√≠ch t·ª´ AI!</p>
                                </div>
                                <button id="refreshAnalysis" class="btn-primary">
                                    <i class="fas fa-sync"></i> C·∫≠p nh·∫≠t ph√¢n t√≠ch
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Leaderboard Tab -->
            <div id="leaderboard" class="tab-pane">
                <div class="container">
                    <div class="page-header">
                        <h1><i class="fas fa-trophy"></i> B·∫£ng x·∫øp h·∫°ng</h1>
                        <p>Xem th√†nh t√≠ch c·ªßa c√°c h·ªçc sinh xu·∫•t s·∫Øc</p>
                    </div>
                    
                    <div class="leaderboard-container">
                        <div class="leaderboard-header">
                            <div class="leaderboard-filters">
                                <button class="filter-btn active" data-filter="all">T·∫•t c·∫£</button>
                                <button class="filter-btn" data-filter="week">Tu·∫ßn n√†y</button>
                                <button class="filter-btn" data-filter="month">Th√°ng n√†y</button>
                            </div>
                            <div class="leaderboard-info">
                                <i class="fas fa-info-circle"></i>
                                <span>ƒêi·ªÉm s·ªë ƒë∆∞·ª£c t√≠nh d·ª±a tr√™n b√†i t·∫≠p v√† tr√≤ ch∆°i</span>
                            </div>
                        </div>
                        
                        <div class="leaderboard-content">
                            <table class="leaderboard-table">
                                <thead>
                                    <tr>
                                        <th>H·∫°ng</th>
                                        <th>T√™n</th>
                                        <th>ƒêi·ªÉm</th>
                                        <th>S·ªë game</th>
                                        <th>Th√†nh t√≠ch</th>
                                    </tr>
                                </thead>
                                <tbody id="leaderboardBody">
                                    <!-- Leaderboard data will be loaded here -->
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="leaderboard-footer">
                            <p>üéØ <strong>L·ªùi khuy√™n:</strong> Luy·ªán t·∫≠p ƒë·ªÅu ƒë·∫∑n m·ªói ng√†y ƒë·ªÉ c·∫£i thi·ªán ƒëi·ªÉm s·ªë!</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Mock Test Tab -->
            <div id="mocktest" class="tab-pane">
                <div class="container">
                    <div class="page-header">
                        <h1><i class="fas fa-file-alt"></i> Thi th·ª≠ To√°n l·ªõp 3</h1>
                        <p>L√†m b√†i thi th·ª≠ v·ªõi c√¢u h·ªèi ƒë∆∞·ª£c AI t·∫°o ra ng·∫´u nhi√™n</p>
                    </div>
                    
                    <!-- Test Setup -->
                    <div class="mock-test-setup" id="mockTestSetup">
                        <div class="quick-test-options">
                            <h3>üöÄ Thi th·ª≠ nhanh</h3>
                            <div class="quick-test-grid">
                                <button class="quick-test-btn" data-test-type="quick_5">
                                    <div class="test-icon">‚ö°</div>
                                    <h4>5 c√¢u - Nhanh</h4>
                                    <p>Ki·ªÉm tra nhanh ki·∫øn th·ª©c</p>
                                    <small>‚âà 8 ph√∫t</small>
                                </button>
                                <button class="quick-test-btn" data-test-type="standard_10">
                                    <div class="test-icon">üìä</div>
                                    <h4>10 c√¢u - Ti√™u chu·∫©n</h4>
                                    <p>ƒê√°nh gi√° to√†n di·ªán</p>
                                    <small>‚âà 15 ph√∫t</small>
                                </button>
                                <button class="quick-test-btn" data-test-type="full_20">
                                    <div class="test-icon">üéØ</div>
                                    <h4>20 c√¢u - ƒê·∫ßy ƒë·ªß</h4>
                                    <p>Ki·ªÉm tra chuy√™n s√¢u</p>
                                    <small>‚âà 30 ph√∫t</small>
                                </button>
                                <button class="quick-test-btn" data-test-type="challenge_15">
                                    <div class="test-icon">üèÜ</div>
                                    <h4>15 c√¢u - Th·ª≠ th√°ch</h4>
                                    <p>Ki·ªÉm tra n√¢ng cao</p>
                                    <small>‚âà 23 ph√∫t</small>
                                </button>
                            </div>
                        </div>

                        <div class="custom-test-options">
                            <h3>üéõÔ∏è T√πy ch·ªânh ƒë·ªÅ thi</h3>
                            <div class="test-settings">
                                <div class="setting-group">
                                    <label for="questionCount">S·ªë c√¢u h·ªèi:</label>
                                    <select id="questionCount">
                                        <option value="5">5 c√¢u</option>
                                        <option value="10" selected>10 c√¢u</option>
                                        <option value="15">15 c√¢u</option>
                                        <option value="20">20 c√¢u</option>
                                        <option value="25">25 c√¢u</option>
                                        <option value="30">30 c√¢u</option>
                                    </select>
                                </div>
                                
                                <div class="setting-group">
                                    <label for="testDifficulty">ƒê·ªô kh√≥:</label>
                                    <select id="testDifficulty">
                                        <option value="easy">D·ªÖ</option>
                                        <option value="medium" selected>Trung b√¨nh</option>
                                        <option value="hard">Kh√≥</option>
                                    </select>
                                </div>
                                
                                <div class="setting-group">
                                    <label for="testTopics">Ch·ªß ƒë·ªÅ:</label>
                                    <select id="testTopics" multiple>
                                        <option value="numbers" selected>S·ªë h·ªçc</option>
                                        <option value="word_problems" selected>Gi·∫£i to√°n c√≥ l·ªùi vƒÉn</option>
                                        <option value="geometry" selected>H√¨nh h·ªçc</option>
                                        <option value="measurement" selected>ƒêo l∆∞·ªùng</option>
                                    </select>
                                    <small>Gi·ªØ Ctrl ƒë·ªÉ ch·ªçn nhi·ªÅu ch·ªß ƒë·ªÅ</small>
                                </div>
                            </div>
                            
                            <div class="test-actions">
                                <button id="startMockTest" class="btn-primary btn-large">
                                    <i class="fas fa-play"></i> B·∫Øt ƒë·∫ßu thi th·ª≠
                                </button>
                                <button id="viewTestHistory" class="btn-secondary">
                                    <i class="fas fa-history"></i> Xem l·ªãch s·ª≠
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Test Interface -->
                    <div class="mock-test-interface hidden" id="mockTestInterface">
                        <div class="test-header">
                            <div class="test-info">
                                <h3 id="testTitle">ƒêang t·∫£i...</h3>
                                <p id="testDescription">Chu·∫©n b·ªã b·∫Øt ƒë·∫ßu</p>
                            </div>
                            <div class="test-controls">
                                <div class="timer-container">
                                    <i class="fas fa-clock"></i>
                                    <span id="testTimer">00:00</span>
                                </div>
                                <div class="progress-container">
                                    <div class="progress-bar">
                                        <div class="progress" id="testProgress"></div>
                                    </div>
                                    <span id="progressText">0/0 c√¢u</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="test-content">
                            <div class="question-header">
                                <div class="question-meta">
                                    <span class="question-number">C√¢u <span id="currentQuestionNumber">1</span>/<span id="totalQuestions">0</span></span>
                                    <span class="topic-badge" id="testTopic">S·ªë h·ªçc</span>
                                    <span class="difficulty-badge" id="testDifficultyBadge">Trung b√¨nh</span>
                                </div>
                            </div>
                            
                            <div class="question-content">
                                <div class="question-text" id="testQuestion">
                                    ƒêang t·∫£i c√¢u h·ªèi...
                                </div>
                                
                                <div class="options-container" id="testOptions">
                                    <!-- Options will be loaded here -->
                                </div>
                            </div>
                            
                            <div class="test-navigation">
                                <button id="prevQuestion" class="btn-secondary" disabled>
                                    <i class="fas fa-arrow-left"></i> C√¢u tr∆∞·ªõc
                                </button>
                                <button id="nextQuestion" class="btn-primary">
                                    C√¢u ti·∫øp theo <i class="fas fa-arrow-right"></i>
                                </button>
                                <button id="submitTest" class="btn-success hidden">
                                    <i class="fas fa-paper-plane"></i> N·ªôp b√†i
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Test Result -->
                    <div class="test-result hidden" id="testResult">
                        <div class="result-header">
                            <div class="result-icon">
                                <i class="fas fa-trophy"></i>
                            </div>
                            <h2>Ho√†n th√†nh b√†i thi! üéâ</h2>
                            <p>ƒê√¢y l√† k·∫øt qu·∫£ chi ti·∫øt c·ªßa b·∫°n</p>
                        </div>
                        
                        <div class="result-stats">
                            <div class="result-stat">
                                <div class="stat-value" id="testScore">0</div>
                                <div class="stat-label">ƒêi·ªÉm s·ªë</div>
                            </div>
                            <div class="result-stat">
                                <div class="stat-value" id="correctAnswers">0/0</div>
                                <div class="stat-label">S·ªë c√¢u ƒë√∫ng</div>
                            </div>
                            <div class="result-stat">
                                <div class="stat-value" id="testAccuracy">0%</div>
                                <div class="stat-label">ƒê·ªô ch√≠nh x√°c</div>
                            </div>
                            <div class="result-stat">
                                <div class="stat-value" id="testTimeSpent">00:00</div>
                                <div class="stat-label">Th·ªùi gian</div>
                            </div>
                        </div>
                        
                        <div class="performance-level-container">
                            <span class="level-label">M·ª©c ƒë·ªô ƒë√°nh gi√°:</span>
                            <span class="level-value" id="performanceLevel">ƒêang t√≠nh...</span>
                        </div>

                        <div class="result-details-grid">
                            <div class="detail-column">
                                <div class="detail-section">
                                    <h4>‚úÖ ƒêi·ªÉm m·∫°nh</h4>
                                    <ul id="strengthsList">
                                        <!-- Strengths will be loaded here -->
                                    </ul>
                                </div>
                                
                                <div class="detail-section">
                                    <h4>üìù ƒêi·ªÉm c·∫ßn c·∫£i thi·ªán</h4>
                                    <ul id="weaknessesList">
                                        <!-- Weaknesses will be loaded here -->
                                    </ul>
                                </div>
                            </div>
                            
                            <div class="detail-column">
                                <div class="detail-section">
                                    <h4>üí° Khuy·∫øn ngh·ªã h·ªçc t·∫≠p</h4>
                                    <ul id="recommendationsList">
                                        <!-- Recommendations will be loaded here -->
                                    </ul>
                                </div>
                                
                                <div class="detail-section">
                                    <h4>‚è± ƒê√°nh gi√° th·ªùi gian</h4>
                                    <p id="timeEvaluation">ƒêang t√≠nh...</p>
                                </div>
                            </div>
                        </div>

                        <div class="topic-breakdown">
                            <h4>üìä Ph√¢n t√≠ch theo ch·ªß ƒë·ªÅ</h4>
                            <div class="topic-breakdown-content" id="topicBreakdown">
                                <!-- Topic breakdown will be loaded here -->
                            </div>
                        </div>
                        
                        <div class="detailed-analysis">
                            <h4>üß† Ph√¢n t√≠ch chi ti·∫øt t·ª´ AI</h4>
                            <div id="detailedAnalysis">
                                <!-- Detailed analysis from AI will be loaded here -->
                            </div>
                        </div>
                        
                        <div class="result-actions">
                            <button id="retryMockTest" class="btn-primary">
                                <i class="fas fa-redo"></i> L√†m b√†i kh√°c
                            </button>
                            <button onclick="window.mathApp.switchTab('learn')" class="btn-secondary">
                                <i class="fas fa-book"></i> H·ªçc t·∫≠p ngay
                            </button>
                            <button id="viewTestHistory" class="btn-outline">
                                <i class="fas fa-history"></i> Xem l·ªãch s·ª≠
                            </button>
                        </div>
                    </div>

                    <!-- Test History -->
                    <div class="test-history hidden" id="testHistory">
                        <div class="history-header">
                            <h2><i class="fas fa-history"></i> L·ªãch s·ª≠ thi th·ª≠</h2>
                            <p>Theo d√µi ti·∫øn b·ªô c·ªßa b·∫°n qua th·ªùi gian</p>
                        </div>
                        
                        <div class="history-chart-container">
                            <canvas id="historyChart"></canvas>
                        </div>
                        
                        <div class="history-content" id="testHistoryContent">
                            <!-- Test history will be loaded here -->
                        </div>
                        
                        <div class="history-actions">
                            <button id="backFromHistory" class="btn-primary">
                                <i class="fas fa-arrow-left"></i> Quay l·∫°i
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- AI Chat Widget -->
    <div id="aiChatWidget" class="ai-chat-widget">
        <div class="chat-header">
            <div class="chat-title">
                <i class="fas fa-robot"></i>
                <span>AI Tutor</span>
            </div>
            <div class="chat-actions">
                <button id="minimizeChat" class="btn-icon">
                    <i class="fas fa-minus"></i>
                </button>
                <button id="closeChat" class="btn-icon">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
        
        <div class="chat-messages" id="chatMessages">
            <div class="welcome-message">
                <div class="message ai-message">
                    <div class="message-avatar">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="message-content">
                        <strong>Xin ch√†o! T√¥i l√† AI Tutor ü§ñ</strong>
                        <p>T√¥i c√≥ th·ªÉ gi√∫p em:</p>
                        <ul>
                            <li>üìö Gi·∫£i th√≠ch b√†i to√°n</li>
                            <li>üí° ƒê∆∞a ra m·∫πo h·ªçc t·∫≠p</li>
                            <li>üéØ G·ª£i √Ω b√†i t·∫≠p ph√π h·ª£p</li>
                            <li>üìù T·∫°o ƒë·ªÅ thi th·ª≠</li>
                            <li>üìñ K·ªÉ chuy·ªán to√°n h·ªçc</li>
                        </ul>
                        <p>H√£y h·ªèi t√¥i b·∫•t c·ª© ƒëi·ªÅu g√¨ v·ªÅ To√°n l·ªõp 3!</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="chat-input-container">
            <div class="quick-questions">
                <button class="quick-question" data-question="Gi·∫£i th√≠ch ph√©p nh√¢n cho em">
                    <i class="fas fa-times"></i> Ph√©p nh√¢n l√† g√¨?
                </button>
                <button class="quick-question" data-question="M·∫πo h·ªçc b·∫£ng c·ª≠u ch∆∞∆°ng">
                    <i class="fas fa-lightbulb"></i> M·∫πo h·ªçc c·ª≠u ch∆∞∆°ng
                </button>
                <button class="quick-question" data-question="T·∫°o ƒë·ªÅ thi th·ª≠ 5 c√¢u">
                    <i class="fas fa-file-alt"></i> ƒê·ªÅ thi th·ª≠
                </button>
            </div>
            <div class="chat-input-group">
                <input type="text" id="chatInput" placeholder="Nh·∫≠p c√¢u h·ªèi c·ªßa em...">
                <button id="sendMessage" class="btn-primary">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>
    
    <button id="openChat" class="ai-chat-button">
        <i class="fas fa-robot"></i>
        <span class="notification-dot"></span>
    </button>

    <script src="js/auth.js"></script>
    <script src="js/audio-manager.js"></script>
    <script src="js/app.js"></script>
    <script src="js/games.js"></script>
    <script src="js/charts.js"></script>
    <script src="js/ai.js"></script>
    <script src="js/mocktest.js"></script>
    <script src="js/main.js"></script>
</body>
</html>